<div class="columns is-centered">
  <div class="column is-half is-full-mobile">

    <div class="block">
      <div class="tabs">
        <ul>
          <li class="is-active">
            <a href="#">My profile</a>
          </li>
          <li>
            <a href="#">Password</a>
          </li>
        </ul>
      </div>
    </div>

    <div class="block">
      <h3 class="title is-3">My profile</h3>
      <p class="subtitle is-6">Here you can manage your profile data</p>
    </div>

    <div class="block">
      <div class="box">
        @if (isError) {
          <div class="message is-danger">
            <div class="message-body">
              <p>Something went wrong. Please try again later</p>
            </div>
          </div>
        }

        @if (isSuccess) {
          <div class="message is-success">
            <div class="message-body">
              <p>Your profile was updated! Nice job!</p>
            </div>
          </div>
        }

        <form [formGroup]="userForm" (submit)="onFormSubmit()">

          <div class="field">
            <label class="label">Your name</label>
            <div class="control">
              <input
                formControlName = "name"
                [class.is-skeleton]="user == undefined"
                [class.is-danger]="userForm.get('name')?.touched && !userForm.get('name')?.valid"
                [class.is-success]="userForm.get('name')?.touched && userForm.get('name')?.valid"
                type="text"
                class="input"
              >
            </div>
            @if (user != undefined && userForm.get('name')?.hasError('required')) {
              <p class="help is-danger">
                <span class="icon">
                  <i class="bx bx-error"></i>
                </span>
                <span>This field cannot be blank</span>
              </p>
            }
          </div>

          <div class="field">
            <label class="label">Your email</label>
            <div class="control">
              <input
                formControlName = "email"
                [class.is-skeleton]="user == undefined"
                [class.is-danger]="userForm.get('email')?.touched && !userForm.get('email')?.valid"
                [class.is-success]="userForm.get('email')?.touched && userForm.get('email')?.valid"
                type="text"
                class="input"
              >
            </div>
            @if (user != undefined && userForm.get('email')?.hasError('required')) {
              <p class="help is-danger">
                <span class="icon">
                  <i class="bx bx-error"></i>
                </span>
                <span>This field cannot be blank</span>
              </p>
            }
            @if (user != undefined && userForm.get('email')?.hasError('email')) {
              <p class="help is-danger">
                <span class="icon">
                  <i class="bx bx-error"></i>
                </span>
                <span>Please provide a valid email address</span>
              </p>
            }
          </div>

          <div class="buttons">
            <button
              [class.is-loading] = "isFormLoading"
              [class.is-skeleton]="user == undefined"
              [disabled]="!userForm.valid"
              class="button is-primary"
              type="submit">Save changes</button>
          </div>

        </form>
      </div>

      <div class="box">
        <div class="buttons">
          <button
            (click)="doLogout()"
            class="button is-danger is-outlined"
          >
            <span class="icon">
              <i class="bx bx-door-open"></i>
            </span>
            <span>Logout</span>
          </button>
        </div>
      </div>
    </div>

  </div>
</div>
